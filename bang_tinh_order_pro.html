<!DOCTYPE html>
  <html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Bảng Tính Order Pro</title>
    <style>
:root {
  --primary: #f1c40f;
  --primary-hover: #d4ac0d;
  --text: #f0f0f0;
  --bg: #121212;
}

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background-color: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 20px;
}

.bang-tinh {
  max-width: 800px;
  margin: auto;
  padding: 24px;
  background: linear-gradient(to bottom right, #1c1c1c, #262626);
  border-radius: 16px;
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.6),
              inset 0 0 12px rgba(255, 255, 255, 0.03);
  transition: all 0.3s ease;
}

.bang-tinh h3 {
  text-align: center;
  margin-bottom: 24px;
  color: #111;
  background: linear-gradient(145deg, #f5c842, #d4ac0d);
  border-radius: 12px;
  padding: 12px;
  border: 1px solid #e1b12c;
  box-shadow: 0 4px 6px rgba(0,0,0,0.3), inset 0 -2px 4px rgba(255,255,255,0.3);
  font-size: 20px;
  font-weight: bold;
}

.bang-tinh table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: linear-gradient(to bottom right, #1c1c1c, #262626);
  border-radius: 12px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6),
              inset 0 0 8px rgba(255, 255, 255, 0.05);
  overflow: hidden;
}

.bang-tinh td {
  padding: 8px;
  text-align: center;
  border: 1px solid #2a2a2a;
  background: #1f1f1f;
  box-shadow: inset 1px 1px 2px rgba(255,255,255,0.05),
              inset -1px -1px 2px rgba(0,0,0,0.4);
  transition: background-color 0.3s;
}

.bang-tinh td input[type="number"],
.bang-tinh td input[type="text"] {
  width: 100%;
  padding: 6px;
  box-sizing: border-box;
  border-radius: 8px;
  background-color: #1c1c1c;
  color: var(--text);
  border: 1px solid #3a3a3a;
  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.6),
              inset -2px -2px 5px rgba(255,255,255,0.05);
  transition: all 0.2s ease-in-out;
}

.bang-tinh td input[type="number"]:focus,
.bang-tinh td input[type="text"]:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 8px var(--primary),
              inset 0 0 6px rgba(255,255,255,0.1);
}

.bang-tinh button {
  padding: 10px 20px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background: linear-gradient(to bottom, var(--primary), var(--primary-hover));
  color: #111;
  font-weight: bold;
  box-shadow: 0 4px 0 #b7950b,
              0 6px 20px rgba(0, 0, 0, 0.3);
  transform: translateY(0);
  transition: all 0.2s ease-in-out;
}

.bang-tinh button:hover {
  background: linear-gradient(to bottom, var(--primary-hover), #b7950b);
}

.bang-tinh button:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #b7950b;
}

#o8 {
  font-weight: bold;
  font-size: 18px;
  background-color: #222;
  border: 2px dashed var(--primary);
  padding: 12px;
  border-radius: 10px;
  text-align: center;
  color: var(--primary);
  box-shadow: inset 0 0 8px rgba(255,255,255,0.1),
              0 4px 10px rgba(255, 215, 0, 0.2);
  margin-top: 16px;
}
      .buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 24px;
}

.send-options {
  display: flex;
  gap: 8px;
  align-items: center;
}

.send-options select {
  padding: 8px 12px;
  border-radius: 8px;
  background-color: #1c1c1c;
  color: var(--text);
  border: 1px solid #3a3a3a;
  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.6),
              inset -2px -2px 5px rgba(255,255,255,0.05);
  appearance: none;
  cursor: pointer;
  font-size: 14px;
}
      .bang-tinh td:first-child {
  text-align: left;
  padding-left: 12px;
}

/* 2. Căn đều các nút theo chiều ngang */
.buttons {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 24px;
}

.send-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  flex: 1;
  justify-content: center;
}

.send-options select,
.send-options button,
.buttons > button {
  flex: 1 1 120px;
  max-width: 200px;
  text-align: center;
}

/* 3. Khoảng cách giữa các dòng ghi chú */
.note {
  margin-top: 8px;
  line-height: 1.5;
  color: #ccc;
}
      /* Đảm bảo mọi button và select có cùng chiều cao */
.bang-tinh button,
.bang-tinh select {
  height: 42px; /* bạn có thể chỉnh lên 44px hoặc 48px nếu muốn lớn hơn */
  padding: 0 16px;
  line-height: 1;
  box-sizing: border-box;
}

/* Đảm bảo văn bản trong select hiển thị đẹp */
.bang-tinh select {
  border-radius: 8px;
  border: 1px solid #3a3a3a;
  background-color: #1c1c1c;
  color: var(--text);
  font-size: 15px;
  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.6),
              inset -2px -2px 5px rgba(255,255,255,0.05);
}
/* Canh đều chiều cao button và select */
.bang-tinh .send-options {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

.bang-tinh select {
  height: 42px;
  padding: 0 40px 0 12px;
  font-size: 15px;
  border-radius: 8px;
  border: 1px solid #3a3a3a;
  background-color: #1c1c1c;
  color: var(--text);
  appearance: none;
  position: relative;
  background-image: url("data:image/svg+xml,%3Csvg fill='white' height='16' viewBox='0 0 24 24' width='16' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 16px;
  cursor: pointer;
}

.bang-tinh button {
  height: 42px;
}
.dropdown-wrapper {
  position: relative;
  display: inline-block;
}

.dropdown-btn {
  height: 42px;
  padding: 0 16px;
  font-size: 15px;
  border-radius: 8px;
  background: linear-gradient(to bottom, var(--primary), var(--primary-hover));
  color: #111;
  font-weight: bold;
  border: none;
  box-shadow: 0 4px 0 #b7950b, 0 6px 16px rgba(0,0,0,0.4);
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  width: 180px;
  text-align: left;
}

.dropdown-btn::after {
  content: '▼';
  float: right;
  margin-left: 8px;
  font-size: 12px;
}

.dropdown-content {
  position: absolute;
  top: 48px;
  left: 0;
  background-color: #1f1f1f;
  border: 1px solid #444;
  border-radius: 10px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.6);
  display: none;
  z-index: 10;
  min-width: 180px;
  overflow: hidden;
  animation: fadeSlide 0.25s ease forwards;
}

.dropdown-content a {
  display: block;
  padding: 10px 14px;
  color: var(--text);
  text-decoration: none;
  transition: background 0.2s;
  font-weight: 500;
}

.dropdown-content a:hover {
  background-color: #2c2c2c;
  color: var(--primary);
  box-shadow: inset 0 0 6px rgba(255,255,255,0.1);
}

@keyframes fadeSlide {
  from { opacity: 0; transform: translateY(-5px); }
  to   { opacity: 1; transform: translateY(0); }
}
.tygia-note {
    font-size: 0.75em;
    color: #66bb6a; /* xanh lá sáng */
    margin-top: 2px;
  }
</style>

  </head>
  <body>
  
    <div class="bang-tinh">
      <div class="product-selector">
        <label>Loại sản phẩm:</label>
        <label><input type="radio" name="productType" value="figure" checked onchange="tinhDonHang()"> Figure</label>
        <label><input type="radio" name="productType" value="electronics" onchange="tinhDonHang()"> Đồ điện tử</label>
      </div>
  
      <h3>📦 BẢNG TÍNH CHI PHÍ ORDER FIGURE TỪ NHẬT BẢN</h3>
  
      <table>
        <tbody>
          <tr>
            <td>💴 Giá website Nhật hiển thị (JPY)</td>
            <td><input id="o1" type="number" placeholder="Nhập giá web" oninput="tinhDonHang()"></td>
            <td>¥</td>
          </tr>
          <tr>
            <td>🧾 Phí thanh toán bên Nhật (3%)</td>
            <td><input id="o2" type="text" readonly placeholder="Phí thanh toán (3%) + 1200¥ nếu là đồ điện tử"></td>
            <td>¥</td>
          </tr>
          <tr>
            <td>🚚 Phí vận chuyển nội địa Nhật</td>
            <td><input id="o3" type="number" placeholder="Ship nội địa" oninput="tinhDonHang()"></td>
            <td>¥</td>
          </tr>
          <tr>
  <td style="vertical-align: top;">
    <div>
      <div><i class="fa-solid fa-coins"></i> Tỷ giá Yên/VNĐ</div>
      <div style="font-size: 0.75em; color: #66bb6a; margin-top: 2px;">
        💱 Tỷ giá được cập nhật vào 15:43:04 9/6/2025
      </div>
    </div>
  </td>
  <td>
    <div style="display: flex; align-items: center;">
      <input type="number" id="exchange-rate" value="195" class="form-control" style="width: 100%;" />
      <span style="margin-left: 5px;">¥ / đ</span>
    </div>
  </td>
</tr>
          <tr>
  <td colspan="3">
    <div id="tygia-note" style="font-size: 0.85em; color: #00FF99; margin-top: 4px;"></div>
  </td>
</tr>
          <tr>
            <td>💡 Tổng tạm tính</td>
            <td><input id="o5" type="text" readonly placeholder="Tạm tính VNĐ"></td>
            <td>₫</td>
          </tr>
          <tr>
            <td>⚖️ Khối lượng sản phẩm (kg)</td>
            <td><input id="o6" type="number" placeholder="Nhập khối lượng" oninput="tinhDonHang()"></td>
            <td>Kg</td>
          </tr>
          <tr>
            <td>✈️ Phí vận chuyển Nhật - Việt (190.000₫/kg)</td>
            <td><input id="o7" type="text" readonly placeholder="Phí vận chuyển"></td>
            <td>₫</td>
          </tr>
          <tr id="o71-row">
            <td>📦 Phí dịch vụ (Từ 200.000₫ - 400.000₫)</td>
            <td><input id="o71" type="text" readonly placeholder="Tùy theo giá trị sản phẩm tối đa 400.000₫"></td>
            <td>₫</td>
          </tr>
          <tr>
            <td><strong>💰 Tổng thiệt hại ước tính 😋</strong></td>
            <td><input id="o8" type="text" readonly placeholder="Tổng thiệt hại"></td>
            <td>₫</td>
          </tr>
        </tbody>
      </table>
  
      <div class="buttons">
 <div class="send-options">
  <label for="contactMethod" style="display:none;">Chọn phương thức liên hệ</label>
  <div class="dropdown-wrapper">
  <button class="dropdown-btn" onclick="toggleDropdown()">📤 Gửi liên hệ</button>
  <div class="dropdown-content" id="contactDropdown">
    <a href="https://zalo.me/0988767811" target="_blank">📱 Qua Zalo</a>
    <a href="https://m.me/vulefigure" target="_blank">💬 Qua Messenger</a>
  </div>
  <button onclick="window.print()">🖨️ In bảng tính</button>
  <button onclick="resetForm()">🔄 Nhập lại</button>
</div>
  
      <div class="note">👉 Bạn vui lòng nhập đầy đủ thông tin để shop ước tính chi phí có thể cho bạn.</div>
      <div class="note">👉 Vui lòng cọc 30% sau khi xác nhận để shop đặt hàng cho bạn nhé.</div>
      <div class="note">⚠️ Phần "Tổng thiệt hại ước tính" chưa bao gồm phí giao sản phẩm đến tận nhà cho bạn.</div>
    </div>
  
    <script>
      function tinhDonHang() {
        const o1 = parseFloat(document.getElementById("o1").value) || 0;
        const o3 = parseFloat(document.getElementById("o3").value) || 0;
        const o4 = parseFloat(document.getElementById("o4").value) || 195;
        const o6 = parseFloat(document.getElementById("o6").value) || 0;
  
        const selectedType = document.querySelector('input[name="productType"]:checked').value;
  
        if (o1 < 0 || o3 < 0 || o6 < 0) {
          alert("Vui lòng nhập số hợp lệ.");
          return;
        }
  
        let o2 = o1 * 0.03;
        if (selectedType === "electronics") o2 += 1200;
  
        const o5 = (o1 + o2 + o3) * o4;
        const o7 = o6 * 190000;
  
        let o71 = 0;
        if (o1 < 4000) o71 = 200000;
        else if (o1 < 10000) o71 = 300000;
        else o71 = 400000;
  
        const o8 = o5 + o7 + o71;
  
        const format = v => v === 0 ? "" : v.toLocaleString("vi-VN");
  
        document.getElementById("o2").value = format(o2);
        document.getElementById("o5").value = format(o5);
        document.getElementById("o7").value = format(o7);
        document.getElementById("o71").value = format(o71);
        document.getElementById("o8").value = o1 > 0 && o6 > 0 ? format(o8) : "";
  
        // Hiện ô o71 nếu có giá trị o1
       const o71Input = document.getElementById("o71");
  o71Input.value = o1 > 0 ? format(o71) : "";
  
        saveToLocal();
      }
  
      function resetForm() {
        ["o1", "o3", "o6"].forEach(id => document.getElementById(id).value = "");
        ["o2", "o5", "o7", "o71", "o8"].forEach(id => document.getElementById(id).value = "");
        document.querySelector('input[value="figure"]').checked = true;
        localStorage.removeItem("orderForm");
        document.getElementById("o71-row").style.display = "none";
        document.getElementById("o1").focus();
      }
  
      function saveToLocal() {
        const data = {
          o1: document.getElementById("o1").value,
          o3: document.getElementById("o3").value,
          o6: document.getElementById("o6").value,
          productType: document.querySelector('input[name="productType"]:checked').value
        };
        localStorage.setItem("orderForm", JSON.stringify(data));
      }
  
      function restoreFromLocal() {
        const saved = JSON.parse(localStorage.getItem("orderForm") || "{}");
        if (saved.o1) document.getElementById("o1").value = saved.o1;
        if (saved.o3) document.getElementById("o3").value = saved.o3;
        if (saved.o6) document.getElementById("o6").value = saved.o6;
        if (saved.productType) {
          document.querySelector(`input[value="${saved.productType}"]`).checked = true;
        }
        tinhDonHang();
      }
  
      function sendToContact() {
        const method = document.getElementById("contactMethod").value;
        if (method === "zalo") {
          window.open("https://zalo.me/0988767811");
        } else if (method === "messenger") {
          window.open("https://m.me/vulefigure");
        }
      }
  
      function setTyGia() {
        const tygia = 195 + 0;
        document.getElementById("o4").value = tygia;
        const now = new Date().toLocaleString("vi-VN");
        document.getElementById("tygia-note").innerText = "💱 Tỷ giá được cập nhật vào " + now;
        document.getElementById("print-datetime").innerText = now;
      }
  
      window.onload = () => {
        restoreFromLocal();
        setTyGia();
      };
      function toggleDropdown() {
  const dropdown = document.getElementById("contactDropdown");
  dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
}

window.onclick = function(e) {
  if (!e.target.matches('.dropdown-btn')) {
    const dropdowns = document.getElementsByClassName("dropdown-content");
    for (let d of dropdowns) d.style.display = "none";
  }
};

    </script>
  </body>
  </html>
