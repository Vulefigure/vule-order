<!DOCTYPE html>
  <html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Báº£ng TÃ­nh Order Pro</title>
    <style>
:root {
  --primary: #f1c40f;
  --primary-hover: #d4ac0d;
  --text: #f0f0f0;
  --bg: #121212;
}

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background-color: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 20px;
}

.bang-tinh {
  max-width: 800px;
  margin: auto;
  padding: 24px;
  background: linear-gradient(to bottom right, #1c1c1c, #262626);
  border-radius: 16px;
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.6),
              inset 0 0 12px rgba(255, 255, 255, 0.03);
  transition: all 0.3s ease;
}

.bang-tinh h3 {
  text-align: center;
  margin-bottom: 24px;
  color: #111;
  background: linear-gradient(145deg, #f5c842, #d4ac0d);
  border-radius: 12px;
  padding: 12px;
  border: 1px solid #e1b12c;
  box-shadow: 0 4px 6px rgba(0,0,0,0.3), inset 0 -2px 4px rgba(255,255,255,0.3);
  font-size: 20px;
  font-weight: bold;
}

.bang-tinh table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: linear-gradient(to bottom right, #1c1c1c, #262626);
  border-radius: 12px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6),
              inset 0 0 8px rgba(255, 255, 255, 0.05);
  overflow: hidden;
}

.bang-tinh td {
  padding: 8px;
  text-align: center;
  border: 1px solid #2a2a2a;
  background: #1f1f1f;
  box-shadow: inset 1px 1px 2px rgba(255,255,255,0.05),
              inset -1px -1px 2px rgba(0,0,0,0.4);
  transition: background-color 0.3s;
}

.bang-tinh td input[type="number"],
.bang-tinh td input[type="text"] {
  width: 100%;
  padding: 6px;
  box-sizing: border-box;
  border-radius: 8px;
  background-color: #1c1c1c;
  color: var(--text);
  border: 1px solid #3a3a3a;
  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.6),
              inset -2px -2px 5px rgba(255,255,255,0.05);
  transition: all 0.2s ease-in-out;
}

.bang-tinh td input[type="number"]:focus,
.bang-tinh td input[type="text"]:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 8px var(--primary),
              inset 0 0 6px rgba(255,255,255,0.1);
}

.bang-tinh button {
  padding: 10px 20px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background: linear-gradient(to bottom, var(--primary), var(--primary-hover));
  color: #111;
  font-weight: bold;
  box-shadow: 0 4px 0 #b7950b,
              0 6px 20px rgba(0, 0, 0, 0.3);
  transform: translateY(0);
  transition: all 0.2s ease-in-out;
}

.bang-tinh button:hover {
  background: linear-gradient(to bottom, var(--primary-hover), #b7950b);
}

.bang-tinh button:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #b7950b;
}

#o8 {
  font-weight: bold;
  font-size: 18px;
  background-color: #222;
  border: 2px dashed var(--primary);
  padding: 12px;
  border-radius: 10px;
  text-align: center;
  color: var(--primary);
  box-shadow: inset 0 0 8px rgba(255,255,255,0.1),
              0 4px 10px rgba(255, 215, 0, 0.2);
  margin-top: 16px;
}
      .buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: center;
  margin-top: 24px;
}

.send-options {
  display: flex;
  gap: 8px;
  align-items: center;
}

.send-options select {
  padding: 8px 12px;
  border-radius: 8px;
  background-color: #1c1c1c;
  color: var(--text);
  border: 1px solid #3a3a3a;
  box-shadow: inset 2px 2px 5px rgba(0,0,0,0.6),
              inset -2px -2px 5px rgba(255,255,255,0.05);
  appearance: none;
  cursor: pointer;
  font-size: 14px;
}
      .bang-tinh td:first-child {
  text-align: left;
  padding-left: 12px;
}

/* 2. CÄƒn Ä‘á»u cÃ¡c nÃºt theo chiá»u ngang */
.buttons {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 12px;
  margin-top: 24px;
}

.send-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  flex: 1;
  justify-content: center;
}

.send-options select,
.send-options button,
.buttons > button {
  flex: 1 1 120px;
  max-width: 200px;
  text-align: center;
}

/* 3. Khoáº£ng cÃ¡ch giá»¯a cÃ¡c dÃ²ng ghi chÃº */
.note {
  margin-top: 8px;
  line-height: 1.5;
  color: #ccc;
}
</style>

  </head>
  <body>
  
    <div class="bang-tinh">
      <div class="product-selector">
        <label>Loáº¡i sáº£n pháº©m:</label>
        <label><input type="radio" name="productType" value="figure" checked onchange="tinhDonHang()"> Figure</label>
        <label><input type="radio" name="productType" value="electronics" onchange="tinhDonHang()"> Äá»“ Ä‘iá»‡n tá»­</label>
      </div>
  
      <h3>ğŸ“¦ Báº¢NG TÃNH CHI PHÃ ORDER FIGURE Tá»ª NHáº¬T Báº¢N</h3>
  
      <table>
        <tbody>
          <tr>
            <td>ğŸ’´ GiÃ¡ website Nháº­t hiá»ƒn thá»‹ (JPY)</td>
            <td><input id="o1" type="number" placeholder="Nháº­p giÃ¡ web" oninput="tinhDonHang()"></td>
            <td>Â¥</td>
          </tr>
          <tr>
            <td>ğŸ§¾ PhÃ­ thanh toÃ¡n bÃªn Nháº­t (3%)</td>
            <td><input id="o2" type="text" readonly placeholder="PhÃ­ thanh toÃ¡n (3%) + 1200Â¥ náº¿u lÃ  Ä‘á»“ Ä‘iá»‡n tá»­"></td>
            <td>Â¥</td>
          </tr>
          <tr>
            <td>ğŸšš PhÃ­ váº­n chuyá»ƒn ná»™i Ä‘á»‹a Nháº­t</td>
            <td><input id="o3" type="number" placeholder="Ship ná»™i Ä‘á»‹a" oninput="tinhDonHang()"></td>
            <td>Â¥</td>
          </tr>
          <tr>
            <td>ğŸ’± Tá»· giÃ¡ YÃªn/VNÄ</td>
            <td><input id="o4" type="number" readonly></td>
            <td>Â¥ / â‚«</td>
          </tr>
          <tr>
            <td>ğŸ’¡ Tá»•ng táº¡m tÃ­nh</td>
            <td><input id="o5" type="text" readonly placeholder="Táº¡m tÃ­nh VNÄ"></td>
            <td>â‚«</td>
          </tr>
          <tr>
            <td>âš–ï¸ Khá»‘i lÆ°á»£ng sáº£n pháº©m (kg)</td>
            <td><input id="o6" type="number" placeholder="Nháº­p khá»‘i lÆ°á»£ng" oninput="tinhDonHang()"></td>
            <td>Kg</td>
          </tr>
          <tr>
            <td>âœˆï¸ PhÃ­ váº­n chuyá»ƒn Nháº­t - Viá»‡t (190.000â‚«/kg)</td>
            <td><input id="o7" type="text" readonly placeholder="PhÃ­ váº­n chuyá»ƒn"></td>
            <td>â‚«</td>
          </tr>
          <tr id="o71-row">
            <td>ğŸ“¦ PhÃ­ dá»‹ch vá»¥ (Tá»« 200.000â‚« - 400.000â‚«)</td>
            <td><input id="o71" type="text" readonly placeholder="TÃ¹y theo giÃ¡ trá»‹ sáº£n pháº©m tá»‘i Ä‘a 400.000â‚«"></td>
            <td>â‚«</td>
          </tr>
          <tr>
            <td>ğŸ’° Tá»•ng thiá»‡t háº¡i Æ°á»›c tÃ­nh ğŸ˜‹</td>
            <td><input id="o8" type="text" readonly placeholder="Tá»•ng thiá»‡t háº¡i"></td>
            <td>â‚«</td>
          </tr>
        </tbody>
      </table>
  
      <div class="buttons">
  <div class="send-options">
    <select id="contactMethod">
      <option value="zalo">ğŸ“± Qua Zalo</option>
      <option value="messenger">ğŸ’¬ Qua Messenger</option>
    </select>
    <button onclick="sendToContact()">ğŸ“¤ LiÃªn há»‡</button>
  </div>
  <button onclick="window.print()">ğŸ–¨ï¸ In báº£ng tÃ­nh</button>
  <button onclick="resetForm()">ğŸ”„ Nháº­p láº¡i</button>
</div>
  
      <div class="note">ğŸ‘‰ Báº¡n vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin Ä‘á»ƒ shop Æ°á»›c tÃ­nh chi phÃ­ cÃ³ thá»ƒ cho báº¡n.</div>
      <div class="note">ğŸ‘‰ Vui lÃ²ng cá»c 30% sau khi xÃ¡c nháº­n Ä‘á»ƒ shop Ä‘áº·t hÃ ng cho báº¡n nhÃ©.</div>
      <div class="note">âš ï¸ Pháº§n "Tá»•ng thiá»‡t háº¡i Æ°á»›c tÃ­nh" chÆ°a bao gá»“m phÃ­ giao sáº£n pháº©m Ä‘áº¿n táº­n nhÃ  cho báº¡n.</div>
      <div class="note" id="tygia-note"></div>
    </div>
  
    <script>
      function tinhDonHang() {
        const o1 = parseFloat(document.getElementById("o1").value) || 0;
        const o3 = parseFloat(document.getElementById("o3").value) || 0;
        const o4 = parseFloat(document.getElementById("o4").value) || 195;
        const o6 = parseFloat(document.getElementById("o6").value) || 0;
  
        const selectedType = document.querySelector('input[name="productType"]:checked').value;
  
        if (o1 < 0 || o3 < 0 || o6 < 0) {
          alert("Vui lÃ²ng nháº­p sá»‘ há»£p lá»‡.");
          return;
        }
  
        let o2 = o1 * 0.03;
        if (selectedType === "electronics") o2 += 1200;
  
        const o5 = (o1 + o2 + o3) * o4;
        const o7 = o6 * 190000;
  
        let o71 = 0;
        if (o1 < 4000) o71 = 200000;
        else if (o1 < 10000) o71 = 300000;
        else o71 = 400000;
  
        const o8 = o5 + o7 + o71;
  
        const format = v => v === 0 ? "" : v.toLocaleString("vi-VN");
  
        document.getElementById("o2").value = format(o2);
        document.getElementById("o5").value = format(o5);
        document.getElementById("o7").value = format(o7);
        document.getElementById("o71").value = format(o71);
        document.getElementById("o8").value = o1 > 0 && o6 > 0 ? format(o8) : "";
  
        // Hiá»‡n Ã´ o71 náº¿u cÃ³ giÃ¡ trá»‹ o1
       const o71Input = document.getElementById("o71");
  o71Input.value = o1 > 0 ? format(o71) : "";
  
        saveToLocal();
      }
  
      function resetForm() {
        ["o1", "o3", "o6"].forEach(id => document.getElementById(id).value = "");
        ["o2", "o5", "o7", "o71", "o8"].forEach(id => document.getElementById(id).value = "");
        document.querySelector('input[value="figure"]').checked = true;
        localStorage.removeItem("orderForm");
        document.getElementById("o71-row").style.display = "none";
        document.getElementById("o1").focus();
      }
  
      function saveToLocal() {
        const data = {
          o1: document.getElementById("o1").value,
          o3: document.getElementById("o3").value,
          o6: document.getElementById("o6").value,
          productType: document.querySelector('input[name="productType"]:checked').value
        };
        localStorage.setItem("orderForm", JSON.stringify(data));
      }
  
      function restoreFromLocal() {
        const saved = JSON.parse(localStorage.getItem("orderForm") || "{}");
        if (saved.o1) document.getElementById("o1").value = saved.o1;
        if (saved.o3) document.getElementById("o3").value = saved.o3;
        if (saved.o6) document.getElementById("o6").value = saved.o6;
        if (saved.productType) {
          document.querySelector(`input[value="${saved.productType}"]`).checked = true;
        }
        tinhDonHang();
      }
  
      function sendToContact() {
        const method = document.getElementById("contactMethod").value;
        if (method === "zalo") {
          window.open("https://zalo.me/0988767811");
        } else if (method === "messenger") {
          window.open("https://m.me/vulefigure");
        }
      }
  
      function setTyGia() {
        const tygia = 195 + 0;
        document.getElementById("o4").value = tygia;
        const now = new Date().toLocaleString("vi-VN");
        document.getElementById("tygia-note").innerText = "ğŸ’± Tá»· giÃ¡ Ä‘Æ°á»£c cáº­p nháº­t vÃ o " + now;
        document.getElementById("print-datetime").innerText = now;
      }
  
      window.onload = () => {
        restoreFromLocal();
        setTyGia();
      };
    </script>
  </body>
  </html>
